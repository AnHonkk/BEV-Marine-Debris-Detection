# configs/train_config.yaml (200x200 학습 -> 400x400 평가)

training:
  batch_size: 2

model:
  type: 'fusion'
  
  # 1. Feature Map 크기 축소 (200x200)
  camera_bev_size: [200, 200]
  bev_size: [200, 200]
  
  # 2. Voxel Size 키우기
  voxel_size: [0.2, 0.2, 8.0]
  point_cloud_range: [-20.0, -20.0, -5.0, 20.0, 20.0, 3.0]
  
  # 3. 출력 업샘플링 설정
  output_stride: 2
  
  # 기타 설정
  lidar_bev_channels: 256
  camera_bev_channels: 256
  max_num_voxels: 50000
  fusion_method: 'adaptive'
  fused_channels: 256
  
  # 클래스 설정
  num_classes: 3
  use_instance_head: false
  use_boundary_head: true

# 데이터 경로
data:
  train_path: '/home/anhong/BEVFusion/dataset/bev_fusion/metadata/train_infos.pkl'
  val_path: '/home/anhong/BEVFusion/dataset/bev_fusion/metadata/val_infos.pkl'
  
  augmentation:
    random_flip: true
    random_rotate: true
    random_scale: [0.9, 1.1]

camera:
  use_camera: true

# Loss 설정
loss:
  class_weights: [1.0, 1.0, 2.0]
  semantic_weight: 1.0
  boundary_weight: 0.5
  dice_weight: 1.0
  focal_gamma: 2.0

# Optimizer & Scheduler
optimizer:
  type: 'AdamW'
  lr: 0.0001
  weight_decay: 0.01

scheduler:
  type: 'CosineAnnealing'
  T_max: 100
  eta_min: 0.000001

# Training Settings
num_epochs: 300
save_interval: 30
val_interval: 1
log_interval: 30
output_dir: './outputs'
device: 'cuda'
mixed_precision: true